<!DOCTYPE html>
<html>
<head>
    <title>Chatbot Data Analyzer</title>
    <style>
        #chat-log {
            border: 1px solid #ccc;
            height: 300px;
            overflow-y: scroll;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>Chatbot Data Analyzer</h1>
    <div id="chat-log"></div>
    <input type="file" id="file-upload" accept=".csv">
    <button id="upload-button">Upload CSV</button>

    <script>
        const chatLog = document.getElementById("chat-log");
        const fileInput = document.getElementById("file-upload");
        const uploadButton = document.getElementById("upload-button");

        uploadButton.addEventListener("click", () => {
            const file = fileInput.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    const csvData = event.target.result;
                    const analysisResult = performBasicAnalysis(csvData); // Simplified analysis function.
                    displayAnalysisResult(analysisResult);
                };
                reader.readAsText(file);
            } else {
                chatLog.innerHTML += "<p>Bot: Please select a file.</p>";
            }
        });

        function performBasicAnalysis(csvData) {
            const rows = csvData.split("\n");
            let htmlTable = "<table>";
            for (let i = 0; i < Math.min(5, rows.length); i++) { // Show first 5 rows
                const cells = rows[i].split(",");
                htmlTable += "<tr>";
                for (const cell of cells) {
                    htmlTable += `<td>${cell}</td>`;
                }
                htmlTable += "</tr>";
            }
            htmlTable += "</table>";
            return `<h2>Basic Data Preview</h2>${htmlTable}`;
        }

        function displayAnalysisResult(result) {
            const newWindow = window.open("", "_blank");
            newWindow.document.write(`
                <html>
                <head><title>Analysis Result</title></head>
                <body>
                    ${result}
                </body>
                </html>
            `);
            newWindow.document.close();
        }
    </script>
</body>
</html>